<!DOCTYPE html>
<html lang="ko">
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>Photo labeling</title>
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.4.0/css/bootstrap.min.css">
    <link href="https://fonts.googleapis.com/css?family=Merriweather|Roboto+Condensed:300,400&display=swap" rel="stylesheet">
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.4.0/jquery.min.js"></script>
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.4.0/js/bootstrap.min.js"></script>
    <link rel="stylesheet" type="text/css" href="{{ url_for('static', filename='css/style.css') }}">
  </head>
  <body style="width: 150%">
    <div class="row">
      <div class="col-sm-9" style="width: 1600px; height: 700px">
        <div class=left1 style="width: 579px; height: 503px; margin:10px">
          <!-- 286 / 53 -->
          <div class =adjective id ="adjective1" style= "text-align: left">
          </div>

          <div class = "red-blue" style=" background-color: rgba(65,122,255,0.2);">
            <div style="width: 100%; height: 33.3%; border: solid">
              <div class="left1" id = "L1" style="width: 25%; height: 100%; border: solid"></div>
              <div class="left1" id = "L2" style="width: 25%; height: 100%; border: solid"></div>
              <div class="left1" id = "L3" style="width: 25%; height: 100%; border: solid"></div>
              <div class="left1" id = "L4" style="width: 25%; height: 100%; border: solid"></div>
            </div>
            <div style="width: 100%; height: 33.3%; border: solid">
              <div class="left1" id = "L5" style="width: 25%; height: 100%; border: solid"></div>
              <div class="left1" id = "L6" style="width: 25%; height: 100%; border: solid"></div>
              <div class="left1" id = "L7" style="width: 25%; height: 100%; border: solid"></div>
              <div class="left1" id = "L8" style="width: 25%; height: 100%; border: solid"></div>
            </div>
            <div style="width: 100%; height: 33.3%; border: solid">
              <div class="left1" id = "L9" style="width: 25%; height: 100%; border: solid"></div>
              <div class="left1" id = "L10" style="width: 25%; height: 100%; border: solid"></div>
              <div class="left1" id = "L11" style="width: 25%; height: 100%; border: solid"></div>
              <div class="left1" id = "L12" style="width: 25%; height: 100%; border: solid"></div>
            </div>
          </div>
        </div>
        <!-- 152 / 53 -->
        <div class = left1 style="width: 310px; height: 503px; margin:10px">
        <div class =adjective style= "text-align: center">
          NEUTRAL 
        </div>
        <div class="neutral">
          <div style="width: 100%; height: 33.3%; border: solid">
            <div class="left1" id = "N1" style="width: 50%; height: 100%; border: solid"></div>
            <div class="left1" id = "N2" style="width: 50%; height: 100%; border: solid"></div>
          </div>
          <div style="width: 100%; height: 33.3%; border: solid">
            <div class="left1" id = "N3" style="width: 50%; height: 100%; border: solid"></div>
            <div class="left1" id = "N4" style="width: 50%; height: 100%; border: solid"></div>
          </div>
          <div style="width: 100%; height: 33.3%; border: solid">
            <div class="left1" id = "N5" style="width: 50%; height: 100%; border: solid"></div>
            <div class="left1" id = "N6" style="width: 50%; height: 100%; border: solid"></div>
          </div>
        </div>
      </div>
        <!-- 286 / 53 -->
      <div class= left1 style="margin:10px">
          <div class =adjective id ="adjective2" style= "text-align: right">
          </div>
        <div class = "red-blue" style="background-color: rgba(242,108,108,0.2)">
            <div style="width: 100%; height: 33.3%; border: solid">
              <div class="left1" id = "R1" style="width: 25%; height: 100%; border: solid"></div>
              <div class="left1" id = "R2" style="width: 25%; height: 100%; border: solid"></div>
              <div class="left1" id = "R3" style="width: 25%; height: 100%; border: solid"></div>
              <div class="left1" id = "R4" style="width: 25%; height: 100%; border: solid"></div>
            </div>
            <div style="width: 100%; height: 33.3%; border: solid">
              <div class="left1" id = "R5" style="width: 25%; height: 100%; border: solid"></div>
              <div class="left1" id = "R6" style="width: 25%; height: 100%; border: solid"></div>
              <div class="left1" id = "R7" style="width: 25%; height: 100%; border: solid"></div>
              <div class="left1" id = "R8" style="width: 25%; height: 100%; border: solid"></div>
            </div>
            <div style="width: 100%; height: 33.3%; border: solid">
              <div class="left1" id = "R9" style="width: 25%; height: 100%; border: solid"></div>
              <div class="left1" id = "R10" style="width: 25%; height: 100%; border: solid"></div>
              <div class="left1" id = "R11" style="width: 25%; height: 100%; border: solid"></div>
              <div class="left1" id = "R12" style="width: 25%; height: 100%; border: solid"></div>
            </div>
        </div>
      </div>
      <div style="width: 100%; height:530px; text-align: center">
      </div>
      <div class=description>
        Please review the images above in a way that the images are placed in the right category.
      </div>
      <div class=description>
        Images in the left box will be labeled as "ADJECTIVE 1, in the middle box as "NEUTRAL", and in the right box as "ADJECTIVE2".
      </div>
      <div class=description>
        You can change the category of an image by hovering over. When you ready, confirm your label
      </div>
      <div style="width: 100%; text-align: center; margin: 10px">
        <button class= "button-confirm" style="">
        CONFIRM
         </button>
      </div>
    </div>
    <div class= "col-sm-3" style="width: 601px; height: 700px; margin-left:10px">
        <div class =adjective style="height:60px">
        </div>
        <div class="tsne">
          <div style="position:absolute; left:32%; top:35%; font-size:40px">T-SNE VIEW</div>
        </div>
        <div style="width: 100%; height:24px; text-align: center">
        </div>
        <div style="height: 100px; text-align: left">
          <svg xmlns="http://www.w3.org/2000/svg" width="364" height="50" viewBox="0 0 364 50">
          <text id="Labeled_adjective_1_" data-name="Labeled (adjective 1)" transform="translate(28 19)" fill="#707070" font-size="18" font-family="RobotoCondensed-Light, Roboto" font-weight="300"><tspan x="0" y="0">Labeled (adjective 1)</tspan></text>
          <text id="Unlabeled" transform="translate(250 19)" fill="#707070" font-size="18" font-family="RobotoCondensed-Light, Roboto" font-weight="300"><tspan x="0" y="0">Unlabeled</tspan></text>
          <text id="Currently_shown" data-name="Currently shown" transform="translate(250 45)" fill="#707070" font-size="18" font-family="RobotoCondensed-Light, Roboto" font-weight="300"><tspan x="0" y="0">Currently shown</tspan></text>
          <text id="Labeled_adjective_2_" data-name="Labeled (adjective 2)" transform="translate(28 45)" fill="#707070" font-size="18" font-family="RobotoCondensed-Light, Roboto" font-weight="300"><tspan x="0" y="0">Labeled (adjective 2)</tspan></text>
          <rect id="사각형_69" data-name="사각형 69" width="18" height="22" transform="translate(0 2)" fill="#417aff"/>
          <g id="사각형_72" data-name="사각형 72" transform="translate(222 2)" fill="none" stroke="#707070" stroke-width="1">
            <rect width="18" height="22" stroke="none"/>
            <rect x="0.5" y="0.5" width="17" height="21" fill="none"/>
          </g>
          <g id="사각형_73" data-name="사각형 73" transform="translate(222 28)" fill="none" stroke="#8af52d" stroke-width="1">
            <rect width="18" height="22" stroke="none"/>
            <rect x="0.5" y="0.5" width="17" height="21" fill="none"/>
          </g>
          <rect id="사각형_70" data-name="사각형 70" width="18" height="22" transform="translate(0 28)" fill="#f26c6c"/>
        </svg>

          </div>   
      </div>
    </div>
    <script type = "text/javascript">
      var targetObj;
      function getLeft(o){
           return parseInt(o.style.left.replace('px', ''));
      }
      function getTop(o){
           return parseInt(o.style.top.replace('px', ''));
      }

      // 이미지 움직이기
      function moveDrag(e){
           var e_obj = window.event? window.event : e;
           var dmvx = parseInt(e_obj.clientX + img_L);
           var dmvy = parseInt(e_obj.clientY + img_T);
           targetObj.style.left = dmvx +"px";
           targetObj.style.top = dmvy +"px";
           return false;
      }

      // 드래그 시작
      function startDrag(e, obj){
           targetObj = obj;
           var e_obj = window.event? window.event : e;
           img_L = getLeft(obj) - e_obj.clientX;
           img_T = getTop(obj) - e_obj.clientY;

           document.onmousemove = moveDrag;
           document.onmouseup = stopDrag;
           if(e_obj.preventDefault)e_obj.preventDefault(); 
      }

      // 드래그 멈추기
      function stopDrag(){
           document.onmousemove = null;
           document.onmouseup = null;
      }
      class Queue {
        constructor() {
          this._arr = [];
          this.cnt = 0;
        }
        enqueue(item) {
          this._arr.push(item);
          this.cnt += 1;
        }
        dequeue() {
          this.cnt -= 1;
          return this._arr.shift();
        }
        pop(){
          return this._arr[0];
        }
      }
      var keyword_list = JSON.parse('{{keyword_list | tojson | safe}}');
      var left_word = "more likely "+ keyword_list[0];
      var right_word = "more likely not " + keyword_list[0];
      $('#adjective1').append(left_word);
      $('#adjective2').append(right_word);
      var wait_images = JSON.parse('{{images | tojson | safe}}');
      console.log(wait_images);
      const queue = new Queue();
      var index =0;
      // first call six pictures
      for(var i=0; i< 6;i++){
          queue.enqueue(wait_images[i]);
          index +=1;          
      }
      for(var i=0; i<queue._arr.length; i++){
        var node = document.createElement('div');
        var img_node = document.createElement('img');
        img_node.style.width = '100%';
        img_node.style.height = '100%';
        img_node.style.onmousedown = 'startDrag(event, this)';
        img_node.src = 'static/image/IU/' + queue._arr[i];
        switch(i){
          case 0:
            $('#N1').append(img_node);
            break;
          case 1:
            $('#N2').append(img_node);
            break;
          case 2:
            $('#N3').append(img_node);
            break;
          case 3:
            $('#N4').append(img_node);
            break;
          case 4:
            $('#N5').append(img_node);
            break;
          case 5:
            $('#N6').append(img_node);
            break;
        }

      }
    </script>

   </body>
</html>